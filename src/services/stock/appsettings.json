{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "ConnectionStrings": {
    "Postgres": "Host=localhost;Port=5434;Database=stockdb;Username=postgres;Password=postgres"
  },
  "RabbitMq": {
    "HostName": "localhost",
    "Port": 5672,
    "UserName": "guest",
    "Password": "guest",
    "VirtualHost": "/",
    "EventsExchange": "ecommerce.events",
    "RetryExchange": "ecommerce.retry",
    "DlqExchange": "ecommerce.dlq",
    "PrefetchCount": 8,
    "Throughput": {
      "Level": "Balanced",
      "Endpoints": {
        "stock.order-created": {
          "Level": "Conservative"
        }
      }
    },
    "RetryDelayMs": 5000,
    "MaxRetries": 3,
    "PublisherConfirmsEnabled": true,
    "PublisherConfirmTimeoutMs": 5000
  },
  "DatabaseStartup": {
    "Mode": "None",
    "MaxRetryCount": 5,
    "RetryDelaySeconds": 2
  },
  "OutboxDispatcher": {
    "PollIntervalMs": 2000,
    "BatchSize": 50
  },
  "StockConcurrency": {
    "Mode": "Pessimistic",
    "Hybrid": {
      "Enabled": true,
      "CanaryPercent": 15,
      "LowStockThreshold": 10,
      "ConservativeOnGuardrailFailure": true
    }
  },
  "StockGuardrail": {
    "Enabled": false,
    "FailOpen": true,
    "Configuration": "localhost:6379",
    "KeyPrefix": "shopngo:stock",
    "MaxInFlightPerSku": 32,
    "InFlightTtlSeconds": 30,
    "HotSkuWindowSeconds": 60,
    "HotSkuEnterThreshold": 100,
    "HotSkuExitThreshold": 60,
    "HotSkuTtlSeconds": 300
  },
  "OpenTelemetry": {
    "Console": {
      "Enabled": true
    },
    "Otlp": {
      "Enabled": false,
      "Endpoint": "",
      "Protocol": "HttpProtobuf"
    },
    "Metrics": {
      "Prometheus": {
        "Enabled": false
      },
      "Runtime": {
        "Enabled": true
      },
      "Process": {
        "Enabled": true
      },
      "HttpServer": {
        "Enabled": true
      },
      "HttpClient": {
        "Enabled": true
      }
    }
  },
  "AllowedHosts": "*"
}
